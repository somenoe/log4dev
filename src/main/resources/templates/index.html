<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />

  <script>
  </script>
  <title>Demo Chart.js</title>
</head>

<body>
  <main class="container">
    <div>
      <h1>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h1>
      <form action="/" method="get">
        <fieldset>
          <fieldset role="group">
            <input style="--pico-border-radius:0.25rem;" name="keyword" id="keyword" type="search"
              placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" />
            <button type="submit">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
          </fieldset>
        </fieldset>
      </form>
    </div>
    <hr />
    <div class="grid">
      <!-- <div style="margin-bottom: 1rem;">
        <canvas id="show-chart"></canvas>
      </div> -->
      <div class="overflow-auto">
        <form action="/add" method="post" onsubmit="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å?')">
          <fieldset role="group">
            <input type="submit" value="‡πÄ‡∏û‡∏¥‡πà‡∏°" />
            <input type="text" name="task" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà" />
          </fieldset>
        </form>
        <table class="striped">
          <thead>
            <tr>
              <th scope="col">‚åö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</th>
              <th scope="col">üí™‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô</th>
              <th scope="col">‚åõ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤</th>
              <th scope="col">‚úèÔ∏è</th>
              <th scope="col">üóëÔ∏è</th>
            </tr>
          </thead>
          <tbody>
            <tr scope="row" th:each="t:${tasks}">
              <td th:text="${t.time}" />
              <td th:text="${t.task}" />
              <td th:text="${t.duration}" class="duration" />
              <td>
                <a th:href="@{/edit/{id}(id=${t.id})}">‡πÅ‡∏Å‡πâ</a>
              </td>
              <td>
                <a th:href="@{/delete/{id}(id=${t.id})}" onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•?')">‡∏•‡∏ö</a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>
  <script>
    function zeroPad(number) {

    }
    const duration = document.querySelectorAll(".duration");
    // change innerText from millisecond to hour and minute
    for (let i = 0; i < duration.length; i++) {
      const d = duration[i].innerText;

      const h = Math.floor(d / 3600000);
      const m = Math.floor((d % 3600000) / 60000);
      const s = Math.floor((d % 60000) / 1000);

      let newInnerText = ""

      if (h > 0) {
        newInnerText += h.toString().padStart("2", "0") + "h ";
      }
      if (m > 0) {
        newInnerText += m.toString().padStart("2", "0") + "m ";
      }
      if (s > 0) {
        newInnerText += s.toString().padStart("2", "0") + "s ";
      }

      duration[i].innerText = newInnerText
    }
  </script>
</body>

</html>